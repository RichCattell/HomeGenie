<!-- ProgramEngine - Program Edit -->
<div data-role="page" id="page_automation_editprogram">



    {include pages/header.html}

    <div class="ui-content" style="padding: 15px">


        <img src="images/program.png" style="position:absolute;top:65px;left:20px;" width="64" />
        <div style="position:relative;height:100px;font-size:10pt;margin-top:20px"><h3 id="page_automation_program_title" style="position:absolute;bottom:40px;left:90px;"></h3></div>


        <ul data-split-icon="delete" data-role="listview" data-inset="false">
            <li data-locale-id="configure_program_programgroup" data-role="list-divider">Program Group</li>
            <li>
                <select id="automation_programgroup"></select>
            </li>
            <li data-locale-id="configure_program_programname" data-role="list-divider">Program Name</li>
            <li>
                <input id="automation_programname" type="text" />
            </li>
            <li data-locale-id="configure_program_programdescription" data-role="list-divider">Program Description</li>
            <li>
                <textarea id="automation_programdescription" cols="40" rows="3"></textarea>
            </li>
            <li data-locale-id="configure_program_programtype" data-role="list-divider">Program Type</li>
            <li>
                <div class="ui-grid-a">
                    <div class="ui-block-a" style="width:70%">
                        <select id="automation_programtype" onchange="HG.WebApp.ProgramsList.ChangeProgramType(this.value)">
                            <option _data-locale-id="configure_program_typewizard" value="Wizard">Wizard Script</option>
                            <option _data-locale-id="configure_program_typecsharp" value="CSharp">C# Program</option>
                            <option _data-locale-id="configure_program_typecsharp" value="Javascript">Javascript Script</option>
                            <option _data-locale-id="configure_program_typecsharp" value="Python">Python Script</option>
                            <option _data-locale-id="configure_program_typecsharp" value="Ruby">Ruby Script</option>
                        </select>
                    </div>
                    <div class="ui-block-b" style="width:30%">
                        <a href="http://www.homegenie.it/docs/" target="_hgmanual" class="ui-btn ui-corner-all">Help</a>
                    </div>
                </div>
                <br />
            </li>
        </ul>

        <ul data-role="listview" data-inset="false">
            <li data-locale-id="configure_program_triggertype" data-role="list-divider">Trigger Type</li>
            <li>
                <div align="center">
                    <select id="automation_conditiontype">
                        <option data-locale-id="configure_program_conditionswitchestrue" value="OnSwitchTrue">when condition evaluation switches to 'true'</option>
                        <option data-locale-id="configure_program_conditionswitchesfalse" value="OnSwitchFalse">when condition evaluation switches to 'false'</option>
                        <option data-locale-id="configure_program_runonceconditiontrue" value="Once">run once, when condition evaluation returns 'true'</option>
                        <option data-locale-id="configure_program_conditionistrue" value="OnTrue">when condition evaluation returns 'true'</option>
                        <option data-locale-id="configure_program_conditionisfalse" value="OnFalse">when condition evaluation returns 'false'</option>
                    </select>
                </div>
            </li>
        </ul>
        <br clear="all" />


        <div id="configure_program_editfortypewizard" data-role="fieldcontain">


            <ul data-role="listview" data-inset="false">
                <li data-locale-id="configure_program_programconditions" data-role="list-divider">Program Conditions</li>
            </ul>
            <ul id="automation_program_conditions" style="margin-top:14px" data-split-icon="delete" data-role="listview" data-inset="false"></ul>
            <br clear="all" />
            <div data-role="controlgroup" data-type="horizontal">
                <a class="ui-btn ui-icon-plus ui-btn-icon-left" data-locale-id="configure_program_conditionadd" href="#automation_domain" data-rel="popup" data-inline="true">Add Condition</a>
                <a class="ui-btn ui-icon-eye ui-btn-icon-left" data-locale-id="configure_program_conditioncapture" href="#automation_capture_condition_popup" data-rel="popup" data-inline="true">Capture</a>
            </div>
            {include pages/configure/programengine/conditionwizard.html}

            <br clear="all" />
            <br clear="all" />

            <ul style="margin-top:14px" data-role="listview" data-inset="false">
                <li data-locale-id="configure_program_instructions" data-role="list-divider">Program Instructions</li>
            </ul>
            <ul id="automation_program_instructions" style="margin-top:14px" data-split-icon="delete" data-role="listview" data-inset="false"></ul>
            <br clear="all" />
            <div data-role="controlgroup" data-type="horizontal">
                <a class="ui-btn ui-icon-plus ui-btn-icon-left" data-locale-id="configure_program_instructionadd" href="#automation_command_domain_popup" data-rel="popup">Add Instruction</a>
                <a class="ui-btn ui-icon-eye ui-btn-icon-left" data-locale-id="configure_program_commamdcapture" href="#automation_capture_command_popup" data-rel="popup">Capture</a>
            </div>
            {include pages/configure/programengine/commandwizard.html}

        </div>

        <div id="configure_program_editfortypecsharp" data-role="fieldcontain" style="display:none">

            <ul data-role="listview" data-inset="false">
                <li data-locale-id="configure_program_programcode" data-role="list-divider">Program Code</li>
            </ul>
            <br clear="all" />
            <div style="float:left"><a href="#page_automation_editprogram_code" class="ui-btn ui-icon-edit ui-btn-icon-left ui-corner-all" data-transition="slide">Edit Source Code</a></div>

            <!--br clear="all" />

            <ul data-split-icon="delete" data-role="listview" data-inset="false">
                <li data-locale-id="configure_program_csharpcode" data-role="list-divider">C# Program - Code To Run</li>
            </ul>
            <br clear="all" />




            <br clear="all" />
            <br clear="all" / -->

        </div>


    </div>



    <div data-role="popup" id="automation_program_saving" class="ui-corner-all" data-overlay-theme="b">
        <div data-role="header" class="ui-corner-top">
            <h1 data-locale-id="configure_program_savingtitle">Saving Program</h1>
        </div>
        <div class="ui-content ui-corner-bottom">
            <h3 data-locale-id="configure_program_savingwait" class="ui-title">Please wait...</h3>
        </div>
    </div>




    <div id="automation_program_switchtype" class="ui-corner-all" data-role="popup" data-overlay-theme="b">
        <div data-role="header" class="ui-corner-top">
            <h1 data-locale-id="configure_program_switchtypetitle">Change Type?</h1>
        </div>
        <div class="ui-content ui-corner-bottom">
            <h3 data-locale-id="configure_program_switchtypeprompt" class="ui-title">Are you sure you want to change program type?</h3>
            <p data-locale-id="configure_program_switchtypeadvice">Current program data will be cleared.</p>
            <div class="ui-grid-a">
            	<div class="ui-block-a">
		            <a data-locale-id="configure_program_switchtypecancel" id="program_switchtypecancel_button" class="ui-btn ui-corner-all" data-inline="true" data-rel="back">Cancel</a>
            	</div>
				<div class="ui-block-b">
		            <a data-locale-id="configure_program_switchtypeconfirm" id="program_switchtype_button" href="#" class="ui-btn ui-corner-all" data-inline="true" data-rel="back" data-transition="flow">Change</a>
				</div>
            </div>
        </div>
    </div>




    <div id="automation_program_delete" class="ui-corner-all" data-role="popup" data-overlay-theme="b">
        <div data-role="header" class="ui-corner-top">
            <h1 data-locale-id="configure_program_deletetitle">Delete Program?</h1>
        </div>
        <div class="ui-content ui-corner-bottom">
            <h3 data-locale-id="configure_program_deleteprompt" class="ui-title">Are you sure you want to delete this program?</h3>
            <p data-locale-id="configure_program_deleteadvice">This action cannot be undone.</p>
            <div class="ui-grid-a">
            	<div class="ui-block-a">
		            <a href="#" class="ui-btn ui-corner-all" data-locale-id="configure_program_deletecancel" data-inline="true" data-rel="back">Cancel</a>
            	</div>
				<div class="ui-block-b">
		            <a id="program_delete_button" href="#" class="ui-btn ui-corner-all" data-locale-id="configure_program_deleteconfirm" data-inline="true" data-rel="back" data-transition="flow">Delete</a>
				</div>
            </div>
        </div>
    </div>




    <div id="editprograms_actionmenu" data-role="popup" data-overlay-theme="b">
        <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
        <h5 align="center">Actions Menu</h5>
        <ul data-role="listview" data-inset="false" style="min-width:210px;">
            <li><a id="automation_program_delete_button" class="ui-btn ui-icon-minus ui-btn-icon-right" data-position-to="window" data-transition="pop">Delete program</a></li>
            <li id="editprograms_actionmenu_run"><a class="ui-btn ui-icon-gear ui-btn-icon-right" data-locale-id="configure_program_options_run" href="javascript:HG.WebApp.ProgramEdit.CheckAndRunProgram(HG.WebApp.ProgramEdit._CurrentProgram);history.back();">Run</a></li>
            <li id="editprograms_actionmenu_break"><a class="ui-btn ui-icon-minus ui-btn-icon-right" data-locale-id="configure_program_options_break" href="javascript:HG.WebApp.ProgramEdit.BreakProgram(HG.WebApp.ProgramEdit._CurrentProgram.Address);history.back();">Break</a></li>
            <li><a class="ui-btn ui-icon-check ui-btn-icon-right" data-locale-id="configure_program_options_save" href="javascript:HG.WebApp.ProgramEdit.SaveProgram();history.back();">Save</a>
        </ul>
    </div>




    <div data-role="footer" data-position="fixed" data-tap-toggle="false">

        <div data-role="navbar">
            <ul>
                <li>
                    <a id="editprograms_backbutton" class="ui-btn ui-icon-back ui-btn-icon-left" data-locale-id="bottombar_button_back" data-transition="slide" data-direction="reverse" href="#page_automation_programs">
                        Back
                    </a>
                </li>
                <li>
                    <a class="ui-btn ui-icon-home ui-btn-icon-left" data-locale-id="bottombar_button_home" data-transition="slide" data-direction="reverse" href="#page_home">
                        Home
                    </a>
                </li>
                <li>
                    <a class="ui-btn ui-icon-arrow-u ui-btn-icon-right" href="#editprograms_actionmenu" data-locale-id="configure_program_bbaractions" data-rel="popup" data-transition="slideup">
                        Actions
                    </a>
                </li>
            </ul>
        </div><!-- /navbar -->

    </div>

</div>

<style>
    .CodeMirror {
        border: 1px solid #eee;
        height: auto;
        position: absolute;
        top: 140px;
        bottom: 60px;
        left: 20px;
        right: 20px;
        border solid 1px red;
        display: block;
    }

    .CodeMirror-scroll {
        overflow-x: auto;
    }
</style>

<div data-role="page" id="page_automation_editprogram_code">

    {include pages/header.html}

    <div class="ui-content" style="padding: 15px">


        <img src="images/program.png" style="position:absolute;top:65px;left:20px;" width="64" />
        <div style="position:relative;height:100px;font-size:10pt;margin-top:20px"><h3 id="page_automation_programcode_title" style="position:absolute;bottom:40px;left:90px;"></h3></div>
        <div style="position:absolute;top:80px; right:20px;font-weight:bolder;"><a id="program_error_button" href="#program_error_message" data-rel="popup" class="ui-btn">ERRORS!</a></div>

    </div>


    <textarea id="automation_program_scriptcondition" onkeydown="if (event.which == 9) { pasteIntoInput(this, '\t'); return false; }" spellcheck="false"></textarea>
    <textarea id="automation_program_scriptsource" onkeydown="if (event.which == 9) { pasteIntoInput(this, '\t'); return false; }" spellcheck="false"></textarea>


    <div data-role="popup" id="program_error_message" style="min-width:300px;min-height:180px;" data-transition="slidedown">
        <a href="javascript:$('#program_error_message').popup('close')" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
        <div data-role="header" class="ui-corner-top">
            <h1 data-locale-id="configure_program_errorstitle">Errors</h1>
        </div>
        <div class="ui-content ui-corner-bottom">
            <p id="program_error_message_text"></p>
        </div>
    </div>




    <div id="editprograms_code_actionmenu" data-role="popup" data-overlay-theme="b">
        <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
        <h5 align="center">Actions Menu</h5>
        <ul data-role="listview" data-inset="false" style="min-width:210px;">
            <li id="editprograms_actionmenu_run"><a class="ui-btn ui-btn-icon-right ui-icon-gear" data-locale-id="configure_program_options_run" href="javascript:HG.WebApp.ProgramEdit.CheckAndRunProgram(HG.WebApp.ProgramEdit._CurrentProgram);history.back();">Run</a></li>
            <li id="editprograms_actionmenu_break"><a class="ui-btn ui-btn-icon-right ui-icon-minus" data-locale-id="configure_program_options_break" href="javascript:HG.WebApp.ProgramEdit.BreakProgram(HG.WebApp.ProgramEdit._CurrentProgram.Address);history.back();">Break</a></li>
            <li id="editprograms_actionmenu_compile"><a class="ui-btn ui-btn-icon-right ui-icon-check" data-locale-id="configure_program_options_update" href="javascript:HG.WebApp.ProgramEdit.CompileProgram();history.back();">Update</a></li>
        </ul>
    </div>





    <div data-role="footer" data-position="fixed" data-tap-toggle="false">

        <div data-role="navbar">
            <ul>
                <li>
                    <a class="ui-btn ui-icon-back ui-btn-icon-left" data-locale-id="bottombar_button_back" data-transition="slide" data-direction="reverse" href="#page_automation_editprogram">
                        Back
                    </a>
                </li>
                <li>
                    <a id="editprograms_code_codeblockstoggle" class="ui-btn ui-icon-gear ui-btn-icon-left" data-locale-id="configure_program_bbar_programeditruncode">
                        Edit Trigger Code
                    </a>
                </li>
                <li>
                    <a class="ui-btn ui-icon-arrow-u ui-btn-icon-right" data-locale-id="configure_program_bbaractions" href="#editprograms_code_actionmenu" data-rel="popup" data-transition="slideup">
                        Actions
                    </a>
                </li>
            </ul>
        </div><!-- /navbar -->

    </div>


</div>



<!-- hg page init script -->
<script type="text/javascript">
    HG.WebApp.ProgramEdit.InitializePage();
</script>
