<div id="automation_domain" class="hg-popup-b" data-role="popup" data-position-to="window" data-overlay-theme="b">
    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
    <div data-role="header">
        <h1>Wizard (1/5)</h1>
    </div>
    <div class="ui-content ui-corner-bottom">

        <div>
            <p data-locale-id="configure_program_selectconditioncontext" style="margin-top:-10px;font-weight:bold">Select condition context</p>
            <p id="condition_wizard_text" style="font-family:courier;font-size:9pt;margin:0px;height:70px;"></p>
        </div>
        <ul id="automation_conditiontarget" data-role="listview" data-inset="false" style="height:180px;max-height:180px;overflow-y:scroll;overflow-x:hidden;">
            <li data-context-value="HomeAutomation.HomeGenie"><a data-rel="popup" href="#automation_target_popup">HomeGenie</a></li>
        </ul>

    </div>
    <div data-role="footer" data-tap-toggle="false">
        <div class="ui-grid-a" align="center">
            <div class="ui-block-a">
                <a data-locale-id="configure_program_deletecancel" data-rel="back" class="ui-btn ui-icon-back ui-btn-icon-left ui-corner-all" href="#">Cancel</a>
            </div>
        </div>
    </div>
</div>


<div id="automation_target_popup" class="hg-popup-b" data-role="popup" data-position-to="window" data-overlay-theme="b">
    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
    <div data-role="header"><h1>Wizard (2/5)</h1></div>
    <div class="ui-content ui-corner-bottom">

        <div>
            <p data-locale-id="configure_program_selectconditionsubject" style="margin-top:-10px;font-weight:bold">Select condition subject</p>
            <p id="condition_wizard_text" style="font-family:courier;font-size:9pt;margin:0px;height:70px;"></p>
        </div>
        <ul id="automation_condition_target" data-role="listview" data-inset="false" style="height:180px;max-height:180px;overflow-y:scroll;overflow-x:hidden;"></ul>
    </div>
    <div data-role="footer" data-tap-toggle="false">
        <div class="ui-grid-a" align="center">
            <div class="ui-block-a">
                <a onclick="HG.WebApp.Utility.SwitchPopup('#automation_target_popup', '#automation_domain', true)" class="ui-btn ui-icon-back ui-btn-icon-left ui-corner-all" data-locale-id="configure_program_wizardback">Back</a>
            </div>
        </div>
    </div>

</div>


<div id="automation_target_homegenie_parameter" class="hg-popup-b" data-position-to="window" data-role="popup" data-overlay-theme="b">
    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
    <div data-role="header"><h1>Wizard (3/5)</h1></div>
    <div class="ui-content ui-corner-bottom">

        <div>
            <p data-locale-id="configure_program_selectconditionproperty" style="margin-top:-10px;font-weight:bold">Select comparison property</p>
            <p id="condition_wizard_text" style="font-family:courier;font-size:9pt;margin:0px;height:70px;"></p>
        </div>
        <ul id="automation_condition_property" data-role="listview" data-inset="false" style="height:180px;max-height:180px;overflow-y:scroll;overflow-x:hidden;"></ul>

    </div>
    <div data-role="footer" data-tap-toggle="false">
        <div class="ui-grid-a" align="center">
            <div class="ui-block-a">
                <a onclick="HG.WebApp.Utility.SwitchPopup('#automation_target_homegenie_parameter', '#automation_target_popup', true)" class="ui-btn ui-icon-back ui-btn-icon-left ui-corner-all" data-locale-id="configure_program_wizardback">Back</a>
            </div>
        </div>
    </div>
</div>


<div id="automation_condition_type" class="hg-popup-b" data-position-to="window" data-role="popup" data-overlay-theme="b">
    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
    <div data-role="header"><h1>Wizard (4/5)</h1></div>
    <div class="ui-content ui-corner-bottom">

        <div>
            <p data-locale-id="configure_program_selectoperator" style="margin-top:-10px;font-weight:bold">Select comparison operator</p>
            <p id="condition_wizard_text" style="font-family:courier;font-size:9pt;margin:0px;height:70px;"></p>
        </div>
        <ul data-role="listview" data-inset="false" style="height:180px;max-height:180px;">
            <li data-context-value="LessThan" id="configure_program_conditionlessthan"><a data-locale-id="configure_program_operatorless" data-rel="popup" href="#automation_condition_value">Less Than</a></li>
            <li data-context-value="Equals"><a data-locale-id="configure_program_operatorequal" data-rel="popup" href="#automation_condition_value">Equals</a></li>
            <li data-context-value="GreaterThan" id="configure_program_conditiongreaterthan"><a data-locale-id="configure_program_operatorgreaterthan" data-rel="popup" href="#automation_condition_value">Greater Than</a></li>
        </ul>

    </div>
    <div data-role="footer" data-tap-toggle="false">
        <div class="ui-grid-a" align="center">
            <div class="ui-block-a">
                <a onclick="HG.WebApp.Utility.SwitchPopup('#automation_condition_type', '#automation_target_homegenie_parameter', true)" class="ui-btn ui-icon-back ui-btn-icon-left ui-corner-all" data-locale-id="configure_program_wizardback">Back</a>
            </div>
        </div>
    </div>
</div>

<div id="automation_condition_value" class="hg-popup-b" data-position-to="window" data-role="popup" data-overlay-theme="b">
    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
    <div data-role="header"><h1>Wizard (5/5)</h1></div>
    <div class="ui-content ui-corner-bottom">
        <div>
            <p data-locale-id="configure_program_selectvalue" style="margin-top:-10px;font-weight:bold">Select comparison value</p>
            <p id="condition_wizard_text" style="font-family:courier;font-size:9pt;margin:0px;height:70px;"></p>
        </div>
        <fieldset data-role="controlgroup" data-type="vertical" style="height:134px;max-height:134px;">
            <input type="text" name="value" id="comparison_value_input" onkeyup="build_condition()" value="" placeholder="value" />
            <a onclick="HG.WebApp.Utility.SwitchPopup('#automation_condition_value', '#automation_condition_value_domain', true)" class="ui-btn ui-corner-all">Module Parameter Value</a>
        </fieldset>
    </div>

    <div data-role="footer" data-tap-toggle="false">
        <div class="ui-grid-a" align="center">
            <div class="ui-block-a">
                <a onclick="HG.WebApp.Utility.SwitchPopup('#automation_condition_value', '#automation_condition_type', true)" class="ui-btn ui-icon-back ui-btn-icon-left ui-corner-all" data-locale-id="configure_program_wizardback">Back</a>
            </div>
            <div class="ui-block-b">
                <a data-locale-id="configure_program_wizarddone" id="condition_completed" class="ui-btn ui-icon-check ui-btn-icon-left ui-corner-all" href="#cancel">Done</a>
            </div>
        </div>
    </div>

</div>


<div id="automation_condition_value_domain" class="hg-popup-b" data-position-to="window" data-role="popup" data-overlay-theme="b">
    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
    <div data-role="header"><h1>Wizard (5/5)</h1></div>
    <div class="ui-content ui-corner-bottom">
        <div>
            <p data-locale-id="configure_program_selectvalue" style="margin-top:-10px;font-weight:bold">Select comparison value</p>
            <p id="condition_wizard_text" style="font-family:courier;font-size:9pt;margin:0px;height:70px;"></p>
        </div>
        <ul id="automation_conditionvalue_domain" data-role="listview" data-inset="false" style="height:180px;max-height:180px;overflow-y:scroll;overflow-x:hidden;">
            <li data-context-value="HomeAutomation.HomeGenie"><a data-rel="popup" href="#automation_target_popup">HomeGenie</a></li>
        </ul>

    </div>

    <div data-role="footer" data-tap-toggle="false">
        <div class="ui-grid-a" align="center">
            <div class="ui-block-a">
                <a onclick="HG.WebApp.Utility.SwitchPopup('#automation_condition_value_domain', '#automation_condition_value', true)" class="ui-btn ui-icon-back ui-btn-icon-left ui-corner-all" data-locale-id="configure_program_wizardback">Back</a>
            </div>
        </div>
    </div>

</div>


<div id="automation_condition_value_address" class="hg-popup-b" data-position-to="window" data-role="popup" data-overlay-theme="b">
    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
    <div data-role="header"><h1>Wizard (5/5)</h1></div>
    <div class="ui-content ui-corner-bottom">
        <div>
            <p data-locale-id="configure_program_selectvalue" style="margin-top:-10px;font-weight:bold">Select comparison value</p>
            <p id="condition_wizard_text" style="font-family:courier;font-size:9pt;margin:0px;height:70px;"></p>
        </div>
        <ul id="automation_conditionvalue_address" data-role="listview" data-inset="false" style="height:180px;max-height:180px;overflow-y:scroll;overflow-x:hidden;"></ul>

    </div>

    <div data-role="footer" data-tap-toggle="false">
        <div class="ui-grid-a">
            <div class="ui-block-a" align="center">
                <a onclick="HG.WebApp.Utility.SwitchPopup('#automation_condition_value_address', '#automation_condition_value_domain', true)" class="ui-btn ui-icon-back ui-btn-icon-left ui-corner-all" data-locale-id="configure_program_wizardback">Back</a>
            </div>
        </div>
    </div>

</div>


<div id="automation_condition_value_property" class="hg-popup-b" data-position-to="window" data-role="popup" data-overlay-theme="b">
    <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
    <div data-role="header"><h1>Wizard (5/5)</h1></div>
    <div class="ui-content ui-corner-bottom">
        <div>
            <p data-locale-id="configure_program_selectvalue" style="margin-top:-10px;font-weight:bold">Select comparison value</p>
            <p id="condition_wizard_text" style="font-family:courier;font-size:9pt;margin:0px;height:70px;"></p>
        </div>
        <ul id="automation_conditionvalue_property" data-role="listview" data-inset="false" style="height:180px;max-height:180px;overflow-y:scroll;overflow-x:hidden;"></ul>

    </div>

    <div data-role="footer" data-tap-toggle="false">
        <div class="ui-grid-a" align="center">
            <div class="ui-block-a">
                <a onclick="HG.WebApp.Utility.SwitchPopup('#automation_condition_value_property', '#automation_condition_value_address', true)" class="ui-btn ui-icon-back ui-btn-icon-left ui-corner-all" data-locale-id="configure_program_wizardback">Back</a>
            </div>
        </div>
    </div>

</div>










<div id="automation_capture_condition_popup" class="ui-corner-all hg-popup-a" data-role="popup" data-position-to="window" data-overlay-theme="b" data-transition="pop">
    <div data-role="header" class="ui-corner-top">
        <h1 data-locale-id="configure_program_conditioncapturetitle">Capturing Conditions</h1>
    </div>
    <div class="ui-content ui-corner-bottom">
        <h3 data-locale-id="configure_program_waitingnewcondition" class="ui-title">Waiting for new events...</h3>
        <p data-locale-id="configure_program_waitingnewconditionadvice"></p>
        <a data-locale-id="configure_program_capturestop" href="#" class="ui-btn ui-corner-all" data-inline="true" data-rel="back">Stop</a>
    </div>
</div>

<div id="automation_condition_delete" class="ui-corner-all hg-popup-a" data-role="popup">
    <div data-role="header" class="ui-corner-top">
        <h1 data-locale-id="configure_program_deleteconditiontitle">Delete Condition?</h1>
    </div>
    <div class="ui-content ui-corner-bottom">
        <h3 data-locale-id="configure_program_deleteconditionprompt" class="ui-title">Are you sure you want to delete this condition statement?</h3>
        <p data-locale-id="configure_program_deleteconditionadvice">This action cannot be undone.</p>
        <div class="ui-grid-a">
        	<div class="ui-block-a">
        		<a href="#" class="ui-btn ui-corner-all" data-locale-id="configure_program_deletecancel" data-rel="back">Cancel</a>
        	</div>
        	<div class="ui-block-b">
        		<a id="condition_delete_button" href="#" class="ui-btn ui-corner-all" data-locale-id="configure_program_deleteconfirm" data-rel="back" data-transition="flow">Delete</a>
        	</div>
        </div>
    </div>
</div>






<script type="text/javascript">
    //
    var condition_targetdomain = '';
    var condition_targetsubject = '';
    var condition_targetparameter = '';
    var condition_type = '';
    var condition_value = '';
    //
    var selected_condition_index = -1;
    //
    $(document).ready(function (e) {

        //
        // automation pop wizard popups
        $('[data-role=popup]').on('popupbeforeposition', function (event) {
            if (this.id == 'automation_domain') {
                condition_targetdomain = '';
                condition_targetsubject = '';
                condition_targetparameter = '';
                condition_type = '';
                condition_value = '';
                //
                $('#comparison_value_input').val('');
                //
                build_condition();
            }
        });


        $('#automation_program_conditions').on('click', ' > li', function () {
            selected_condition_index = $(this).index();
        });

        $('#condition_delete_button').bind('click', function (event) {
            if (selected_condition_index >= 0) {
                HG.WebApp.ProgramEdit._CurrentProgram.Conditions.splice(selected_condition_index, 1);
                automationpage_ConditionsRefresh();
            }
        });


        $('#automation_conditiontarget').on('click', 'li', function () {
            condition_targetdomain = $(this).attr('data-context-value');
            //
            $('#automation_condition_target').listview().empty();
            //
            switch (condition_targetdomain) {
                case 'HomeAutomation.HomeGenie':
                    $('#automation_condition_target').append('<li data-context-value="Automation"><a>Automation</a></li>');
                    break;
                default:
                    $('#automation_condition_target').append(automationpage_GetModulesListViewItems(condition_targetdomain, false));
                    break;
            }
            $('#automation_condition_target').listview('refresh');
            //
            build_condition();
            //
            HG.WebApp.Utility.SwitchPopup('#automation_domain', '#automation_target_popup', true);
        });

        $('#automation_target_popup').on('click', 'li', function () {
            condition_targetsubject = $(this).attr('data-context-value');
            //
            $('#automation_condition_property').listview().empty();
            //
            var module = HG.WebApp.Utility.GetModuleByDomainAddress(condition_targetdomain, condition_targetsubject);
            if (module != null && (module.Address == "RF" || module.Address == "IR")) {
                $('#automation_condition_property').append('<li data-context-value="Receiver.RawData"><a>Receiver.RawData</a></li>');
            }
            else {
                switch (condition_targetdomain) {
                    case 'HomeAutomation.HomeGenie':
                        $('#automation_condition_property').append('<li data-context-value="Meter.WattsCounter"><a>Meter.WattsCounter</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Meter.WattsLoad"><a>Meter.WattsLoad</a></li>');
                        //$('#automation_condition_property').append('<li data-context-value="Scheduler.TimeEvent"><a>Scheduler.TimeEvent</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.CronEvent"><a>Scheduler.CronEvent</a></li>');

                        $('#automation_condition_property').append('<li data-context-value="Scheduler.Date"><a>Scheduler.Date</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.Time"><a>Scheduler.Time</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.DateTime"><a>Scheduler.DateTime</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.DateDay"><a>Scheduler.DateDay</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.DateMonth"><a>Scheduler.DateMonth</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.DateYear"><a>Scheduler.DateYear</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.DateDayOfWeek"><a>Scheduler.DateDayOfWeek</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.DateHour"><a>Scheduler.DateHour</a></li>');
                        $('#automation_condition_property').append('<li data-context-value="Scheduler.DateMinute"><a>Scheduler.DateMinute</a></li>');

                        //$('#automation_condition_property').append('<li data-context-value="Security.ArmedStatus"><a>Security.ArmedStatus</a></li>');
                        break;
                    default:
                        if (module != null) {
                            var comparable_props = HG.WebApp.ProgramEdit.GetModuleComparableProperties(module);
                            for (var p = 0; p < comparable_props.length; p++) {
                                var prop = comparable_props[p];
                                $('#automation_condition_property').append('<li data-context-value="' + prop.Name + '"><a>' + prop.Name + '</a></li>');
                            }
                        }
                        break;
                }
            }
            $('#automation_condition_property').listview('refresh');
            //
            build_condition();
            //
            HG.WebApp.Utility.SwitchPopup('#automation_target_popup', '#automation_target_homegenie_parameter', true);
        });

        $('#automation_target_homegenie_parameter').on('click', 'li', function () {
            condition_targetparameter = $(this).attr('data-context-value')
            if (condition_targetparameter == 'Scheduler.TimeEvent' || condition_targetparameter == 'Receiver.RawData') {
                $('#configure_program_conditionlessthan').hide();
                $('#configure_program_conditiongreaterthan').hide();
            }
            else {
                $('#configure_program_conditionlessthan').show();
                $('#configure_program_conditiongreaterthan').show();
            }
            build_condition();
            //
            HG.WebApp.Utility.SwitchPopup('#automation_target_homegenie_parameter', '#automation_condition_type', true);
        });

        $('#automation_condition_type').on('click', 'li', function () {
            condition_type = $(this).attr('data-context-value')
            build_condition();
            //
            HG.WebApp.Utility.SwitchPopup('#automation_condition_type', '#automation_condition_value', true);
        });



        $('#automation_conditionvalue_domain').on('click', 'li', function () {
            var domain = $(this).attr('data-context-value');
            //
            $('#automation_conditionvalue_address').listview().empty();
            //
            $('#automation_conditionvalue_address').append(automationpage_GetModulesListViewItems(domain, false));
            //
            $('#automation_conditionvalue_address').listview('refresh');
            //
            build_condition();
            //
            HG.WebApp.Utility.SwitchPopup('#automation_condition_value_domain', '#automation_condition_value_address', true);
        });


        $('#automation_conditionvalue_address').on('click', 'li', function () {
            var domain = $(this).attr('data-context-domain');
            var address = $(this).attr('data-context-value');
            //
            $('#automation_conditionvalue_property').listview().empty();
            //
            var module = HG.WebApp.Utility.GetModuleByDomainAddress(domain, address);
            if (module != null && (module.Address == "RF" || module.Address == "IR")) {
                $('#automation_conditionvalue_property').append('<li data-context-value="Receiver.RawData"><a>Receiver.RawData</a></li>');
            }
            else if (module != null) {
                var comparable_props = HG.WebApp.ProgramEdit.GetModuleComparableProperties(module);
                for (var p = 0; p < comparable_props.length; p++) {
                    var prop = comparable_props[p];
                    $('#automation_conditionvalue_property').append('<li data-context-value=":' + module.Domain + '/' + module.Address + '/' + prop.Name + '"><a>' + prop.Name + '</a></li>');
                }
            }
            $('#automation_conditionvalue_property').listview('refresh');
            //
            build_condition();
            //
            HG.WebApp.Utility.SwitchPopup('#automation_condition_value_address', '#automation_condition_value_property', true);
        });

        $('#automation_conditionvalue_property').on('click', 'li', function () {
            condition_value = $(this).attr('data-context-value');
            $('#comparison_value_input').val(condition_value);
            //
            build_condition();
            //
            HG.WebApp.Utility.SwitchPopup('#automation_condition_value_property', '#automation_condition_value', true);
        });

        $('#comparison_value_input').on('keyup', function () {
            condition_value = $('#comparison_value_input').val();
            //
            build_condition();
        });

        $('#condition_completed').on('click', function () {
            condition_value = $('#comparison_value_input').val();

            conditionobj = {
                'Domain': condition_targetdomain,
                'Target': condition_targetsubject,
                'Property': condition_targetparameter,
                'ComparisonOperator': condition_type,
                'ComparisonValue': condition_value
            };

            HG.WebApp.ProgramEdit._CurrentProgram.Conditions.push(conditionobj);

            automationpage_ConditionsRefresh();

        });

    });



    function automationpage_GetModulesListViewItems(domain, showall) {
        var htmlopt = '';
        var mods = HG.WebApp.ProgramEdit.GetDomainComparableModules(domain, showall);
        for (var m = 0; m < mods.length; m++) {
            htmlopt += '<li data-context-domain="' + mods[m].Domain + '" data-context-value="' + mods[m].Address + '"><a>' + mods[m].Address + ' (' + (mods[m].Name == null || mods[m].Name == '' ? mods[m].DeviceType : mods[m].Name) + ')' + '</a></li>'
        }
        return htmlopt;
    }



    function build_condition() {
        var conditionstring = '... ?';

        if (condition_targetdomain != '') {
            conditionstring = condition_targetdomain;
        }
        if (condition_targetsubject != '') {
            conditionstring += '.' + condition_targetsubject;
        }
        if (condition_targetparameter != '') {
            conditionstring += '<br />&bull; <b>' + condition_targetparameter + '</b>';
        }
        if (condition_type != '') {
            conditionstring += '<br />' + condition_type;
        }
        if (condition_value != '') {
            var cval = condition_value;
            if (cval[0] == ':') {
                var path = cval.split('/');
                var lastdot = path[0].lastIndexOf('.');
                if (lastdot > 0) {
                    cval = cval.substring(lastdot + 1);
                }
            }
            conditionstring += '<br />&bull; <b>' + cval + '</b>';
        }
        $('body').find('[id=condition_wizard_text]').each(function () { $(this).html(conditionstring); });
    }







    function automationpage_ConditionsRefresh() {

        $('#automation_program_conditions').empty();
        for (i = 0; i < HG.WebApp.ProgramEdit._CurrentProgram.Conditions.length; i++) {
            if (HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].ComparisonOperator == "-1") {
                HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].ComparisonOperator = "LessThan";
            }
            else if (HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].ComparisonOperator == "0") {
                HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].ComparisonOperator = "Equals";
            }
            else if (HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].ComparisonOperator == "1") {
                HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].ComparisonOperator = "GreaterThan";
            }
            //
            var pname = HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].Property;
            if (pname.indexOf('.') > 0) {
                pname = pname.substring(pname.indexOf('.') + 1);
            }
            $('#automation_program_conditions').append('' +
                '<li data-context-value="' + i + '"><a>' +
                ' <span style="color:gray">' + HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].Domain.split('.')[1] + '</span>' +
                ' ' + HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].Target +
                ' <span style="color:gray">property</span> <b>' + pname + '</b>' +
                ' <span style="color:gray">' + HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].ComparisonOperator + '</span>' +
                ' <b>' + HG.WebApp.ProgramEdit._CurrentProgram.Conditions[i].ComparisonValue + '</b>' +
                '</a><a data-rel="popup" data-position-to="window" class="ui-btn" data-inline="true" data-transition="pop" href="#automation_condition_delete">Delete</a></li>');
        }
        $('#automation_program_conditions').listview('refresh');

    }




</script>
